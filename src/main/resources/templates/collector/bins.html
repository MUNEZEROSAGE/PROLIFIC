<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <title>Manage Bins</title>-->
<!--    &lt;!&ndash; Include your CSS/JS files &ndash;&gt;-->
<!--</head>-->
<!--<body>-->
<!--<div th:replace="fragments/header :: header"></div>-->

<!--<div class="container">-->
<!--    <h2>Manage Smart Bins</h2>-->

<!--    <table class="table">-->
<!--        <thead>-->
<!--        <tr>-->
<!--            <th>Location</th>-->
<!--            <th>Status</th>-->
<!--            <th>Fill Level</th>-->
<!--            <th>Last Collected</th>-->
<!--            <th>Actions</th>-->
<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--        <tr th:each="bin : ${bins}">-->
<!--            <td th:text="${bin.location}"></td>-->
<!--            <td>-->
<!--                        <span th:text="${bin.status}"-->
<!--                              th:class="${bin.status == 'FULL' ? 'badge bg-danger' :-->
<!--                                       (bin.status == 'HALF_FULL' ? 'badge bg-warning' :-->
<!--                                       'badge bg-success')}"></span>-->
<!--            </td>-->
<!--            <td th:text="${bin.fillLevel + '%'}"></td>-->
<!--            <td th:text="${#temporals.format(bin.lastCollectedAt, 'dd/MM/yyyy HH:mm')}"></td>-->
<!--            <td>-->
<!--                <a th:if="${bin.status != 'BROKEN'}"-->
<!--                   th:href="@{/collector/flag-broken/{id}(id=${bin.id})}"-->
<!--                   class="btn btn-warning btn-sm">Flag Broken</a>-->
<!--                <a th:href="@{/collector/mark-empty/{id}(id=${bin.id})}"-->
<!--                   class="btn btn-success btn-sm">Mark Empty</a>-->
<!--            </td>-->
<!--        </tr>-->
<!--        </tbody>-->
<!--    </table>-->

<!--    &lt;!&ndash; Pagination &ndash;&gt;-->
<!--    <div th:replace="fragments/pagination :: pagination(${currentPage}, ${totalPages}, '/collector/bins')"></div>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Manage Bins</title>
</head>
<body>
<div><!-- Header removed --></div>

<div>
    <h2>Manage Smart Bins</h2>
    <a href="/collector/bins/add" class="btn btn-primary">Add New Bin</a>
    <table>
        <thead>
        <tr>
            <th>Location</th>
            <th>Status</th>
            <th>Fill Level</th>
            <th>Last Collected</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="bin : ${bins}">
            <td>
                <a th:href="@{https://www.google.com/maps?q={lat},{lng}(lat=${bin.latitude}, lng=${bin.longitude})}"
                   target="_blank"
                   th:text="'View on Map'">
                </a>
            </td>
            <td>
                <span th:text="${bin.status}"></span>
            </td>
            <td th:text="${bin.fillLevel + '%'}"></td>
            <td th:text="${#temporals.format(bin.lastCollectedAt, 'dd/MM/yyyy HH:mm')}"></td>

            <td>
                <a th:href="@{/collector/bins/edit/{id}(id=${bin.id})}"
                   class="btn btn-primary btn-sm">Edit</a>
                <a th:href="@{/collector/bins/delete/{id}(id=${bin.id})}"
                   class="btn btn-danger btn-sm"
                   onclick="return confirm('Are you sure you want to delete this bin?');">Delete</a>
                <!-- Existing buttons -->
                <a th:href="@{/collector/bins/scan/{id}(id=${bin.id})}"
                   class="btn btn-info btn-sm">Scan Item</a>
                <!-- Flag as Broken (POST Form) -->
                <form th:action="@{/collector/flag-broken/{id}(id=${bin.id})}" method="POST" th:if="${bin.status != 'BROKEN'}">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button type="submit" class="btn btn-warning btn-sm">Red-Flag</button>
                </form>
                <!-- Mark as Empty (POST Form) -->
                <form th:action="@{/collector/mark-empty/{id}(id=${bin.id})}" method="POST">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button type="submit" class="btn btn-success btn-sm">Empty Bin</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>